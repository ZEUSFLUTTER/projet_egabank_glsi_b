<div class="flex h-screen bg-gray-100">
  <!-- Sidebar -->
  <aside 
    [class.w-64]="sidebarOpen" 
    [class.w-20]="!sidebarOpen"
    class="bg-primary-800 text-white transition-all duration-300 ease-in-out flex flex-col"
  >
    <!-- Logo -->
    <div class="p-4 flex items-center justify-between border-b border-primary-700">
      <h1 *ngIf="sidebarOpen" class="text-2xl font-bold">EGA Bank</h1>
      <h1 *ngIf="!sidebarOpen" class="text-2xl font-bold">EB</h1>
      <button (click)="toggleSidebar()" class="p-2 hover:bg-primary-700 rounded-lg transition">
        <fa-icon [icon]="sidebarOpen ? faTimes : faBars"></fa-icon>
      </button>
    </div>

    <!-- User Info -->
    <div class="p-4 border-b border-primary-700" *ngIf="currentUser">
      <div *ngIf="sidebarOpen" class="text-sm">
        <p class="font-semibold">{{ currentUser.nom }}</p>
        <p class="text-primary-300 text-xs">{{ currentUser.role }}</p>
      </div>
      <div *ngIf="!sidebarOpen" class="flex justify-center">
        <div class="w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center">
          {{ currentUser.nom?.charAt(0) }}
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 overflow-y-auto py-4">
      <ul class="space-y-2 px-2">
        <li *ngFor="let item of menuItems">
          <a 
            *ngIf="hasAccess(item.roles)"
            [routerLink]="item.route" 
            routerLinkActive="bg-primary-700"
            class="flex items-center px-4 py-3 hover:bg-primary-700 rounded-lg transition group"
            [title]="!sidebarOpen ? item.label : ''"
          >
            <fa-icon [icon]="item.icon" class="text-lg"></fa-icon>
            <span *ngIf="sidebarOpen" class="ml-3">{{ item.label }}</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Logout -->
    <div class="p-4 border-t border-primary-700">
      <button 
        (click)="logout()"
        class="w-full flex items-center px-4 py-3 hover:bg-primary-700 rounded-lg transition"
        [title]="!sidebarOpen ? 'Déconnexion' : ''"
      >
        <fa-icon [icon]="faSignOutAlt" class="text-lg"></fa-icon>
        <span *ngIf="sidebarOpen" class="ml-3">Déconnexion</span>
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-white shadow-sm z-10">
      <div class="px-6 py-4">
        <h2 class="text-2xl font-semibold text-gray-800">Bienvenue</h2>
        <p class="text-gray-600 text-sm">Gérez votre banque efficacement</p>
      </div>
    </header>

    <!-- Content Area -->
    <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
