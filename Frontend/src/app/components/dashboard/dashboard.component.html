<div class="dashboard-container">
  <div class="dashboard-header">
    <div class="welcome-section">
      <h1>Bienvenue sur EgaBank</h1>
      <p>Tableau de bord de gestion bancaire</p>
    </div>
    <div class="header-actions">
      <a routerLink="/dashboard/clients/new" class="btn btn-primary">
        <i class="fas fa-user-plus"></i>
        Nouveau Client
      </a>
      <a routerLink="/dashboard/transactions/new" class="btn btn-secondary">
        <i class="fas fa-exchange-alt"></i>
        Transaction
      </a>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card clients">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.totalClients }}</span>
        <span class="stat-label">Clients</span>
      </div>
      <a routerLink="/dashboard/clients" class="stat-link">
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>

    <div class="stat-card comptes">
      <div class="stat-icon">
        <i class="fas fa-credit-card"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.totalComptes }}</span>
        <span class="stat-label">Comptes</span>
        <div class="stat-breakdown">
          <span><i class="fas fa-piggy-bank"></i> {{ stats.comptesEpargne }} Épargne</span>
          <span><i class="fas fa-wallet"></i> {{ stats.comptesCourant }} Courant</span>
        </div>
      </div>
      <a routerLink="/dashboard/comptes" class="stat-link">
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>

    <div class="stat-card solde">
      <div class="stat-icon">
        <i class="fas fa-coins"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.soldeTotal | number:'1.2-2' }} FCFA</span>
        <span class="stat-label">Solde Total</span>
      </div>
    </div>

    <div class="stat-card transactions">
      <div class="stat-icon">
        <i class="fas fa-receipt"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.totalTransactions }}</span>
        <span class="stat-label">Transactions</span>
      </div>
      <a routerLink="/dashboard/transactions" class="stat-link">
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>
  </div>

  <div class="dashboard-content">
    <!-- Recent Transactions -->
    <div class="dashboard-card">
      <div class="card-header">
        <h2> Dernières Transactions</h2>
        <a routerLink="/dashboard/transactions" class="view-all">Voir tout <i class="fas fa-arrow-right"></i></a>
      </div>
      <div class="card-body">
        @if (recentTransactions.length > 0) {
        <div class="transactions-list">
          @for (txn of recentTransactions; track txn.id) {
          <div class="transaction-item" [class.depot]="txn.type === 'DEPOT'" [class.retrait]="txn.type === 'RETRAIT'"
            [class.virement]="txn.type === 'VIREMENT'">
            <div class="txn-icon">
              <i class="fas" [class]="getTransactionIcon(txn.type)"></i>
            </div>
            <div class="txn-info">
              <span class="txn-description">{{ getTransactionDescription(txn) }}</span>
              <span class="txn-date">{{ txn.dateTransaction | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
            <div class="txn-amount" [class.credit]="txn.type === 'DEPOT'" [class.debit]="txn.type !== 'DEPOT'">
              {{ txn.type === 'DEPOT' ? '+' : '-' }}{{ txn.montant | number:'1.2-2' }} FCFA
            </div>
          </div>
          }
        </div>
        } @else {
        <div class="empty-state">
          <i class="fas fa-receipt"></i>
          <p>Aucune transaction récente</p>
          <a routerLink="/dashboard/transactions/new" class="btn btn-primary btn-sm">
            <i class="fas fa-plus"></i> Nouvelle transaction
          </a>
        </div>
        }
      </div>
    </div>

    <!-- Recent Clients -->
    <div class="dashboard-card">
      <div class="card-header">
        <h2> Derniers Clients</h2>
        <a routerLink="/dashboard/clients" class="view-all">Voir tout <i class="fas fa-arrow-right"></i></a>
      </div>
      <div class="card-body">
        @if (recentClients.length > 0) {
        <div class="clients-list">
          @for (client of recentClients; track client.id) {
          <a [routerLink]="['/dashboard/clients', client.id]" class="client-item">
            <div class="client-avatar" [class.male]="client.sexe === 'M'" [class.female]="client.sexe === 'F'">
              <i class="fas" [class.fa-mars]="client.sexe === 'M'" [class.fa-venus]="client.sexe === 'F'"></i>
            </div>
            <div class="client-info">
              <span class="client-name">{{ client.prenom }} {{ client.nom }}</span>
              <span class="client-email">{{ client.courriel }}</span>
            </div>
            <i class="fas fa-chevron-right"></i>
          </a>
          }
        </div>
        } @else {
        <div class="empty-state">
          <i class="fas fa-users"></i>
          <p>Aucun client enregistré</p>
          <a routerLink="/dashboard/clients/new" class="btn btn-primary btn-sm">
            <i class="fas fa-plus"></i> Nouveau client
          </a>
        </div>
        }
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h3>Actions Rapides</h3>
    <div class="actions-grid">
      <a routerLink="/dashboard/clients/new" class="action-card">
        <div class="action-icon clients">
          <i class="fas fa-user-plus"></i>
        </div>
        <span>Nouveau Client</span>
      </a>
      <a routerLink="/dashboard/comptes/new" class="action-card">
        <div class="action-icon comptes">
          <i class="fas fa-plus-circle"></i>
        </div>
        <span>Ouvrir un Compte</span>
      </a>
      <a routerLink="/dashboard/transactions/new" [queryParams]="{type: 'DEPOT'}" class="action-card">
        <div class="action-icon depot">
          <i class="fas fa-arrow-down"></i>
        </div>
        <span>Dépôt</span>
      </a>
      <a routerLink="/dashboard/transactions/new" [queryParams]="{type: 'RETRAIT'}" class="action-card">
        <div class="action-icon retrait">
          <i class="fas fa-arrow-up"></i>
        </div>
        <span>Retrait</span>
      </a>
      <a routerLink="/dashboard/transactions/new" [queryParams]="{type: 'VIREMENT'}" class="action-card">
        <div class="action-icon virement">
          <i class="fas fa-exchange-alt"></i>
        </div>
        <span>Virement</span>
      </a>
      <a routerLink="/dashboard/transactions" class="action-card">
        <div class="action-icon historique">
          <i class="fas fa-history"></i>
        </div>
        <span>Historique</span>
      </a>
    </div>
  </div>
</div>