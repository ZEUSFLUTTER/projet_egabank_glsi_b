<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary">Gestion des Clients</h2>

    <button class="btn btn-primary d-flex align-items-center gap-2 shadow-sm" routerLink="/nouveau-client">
      <i class="bi bi-person-plus-fill"></i>
      Ajouter un Client
    </button>
  </div>

  <div class="row mb-4">
    <div class="col-md-6">
      <div class="input-group shadow-sm">
        <span class="input-group-text bg-white border-end-0">
          <i class="bi bi-search text-muted"></i>
        </span>
        <input
          type="text"
          class="form-control border-start-0 ps-0"
          placeholder="Rechercher un nom, prénom ou compte..."
          [(ngModel)]="searchTerm"
          (input)="filtrerClients()"
        >
      </div>
    </div>
  </div>

  <div class="card shadow-sm border-0">
    <div class="card-body p-0">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th class="ps-4">Numéro de compte</th>
            <th>Nom & Prénoms</th>
            <th>Email</th>
            <th>Type</th>
            <th>Statut</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of clientsFiltres">
            <td class="ps-4">
              <span class="badge bg-light text-primary border">
                {{ c.numeroCompte || c.compte?.numeroCompte }}
              </span>
            </td>
            <td class="fw-bold">{{ c.nom }} {{ c.prenom }}</td>
            <td>{{ c.email }}</td>
            <td>
              <span class="text-muted small text-uppercase">{{ c.type || c.compte?.typeCompte }}</span>
            </td>
            <td>
              <span class="badge" [ngClass]="(c.statut === 'ACTIF' || c.compte?.statut === 'ACTIF') ? 'bg-success' : 'bg-warning'">
                {{ c.statut || c.compte?.statut || 'INACTIF' }}
              </span>
            </td>
            <td class="text-center">
              <div class="d-flex justify-content-center gap-2">
                <button class="btn btn-outline-info btn-sm" [routerLink]="['/client-details', c.id]" title="Voir">
                  <i class="bi bi-eye"></i>
                </button>
                <button class="btn btn-outline-warning btn-sm" [routerLink]="['/modifier-client', c.id]" title="Editer">
                  <i class="bi bi-pencil"></i>
                </button>
                <button class="btn btn-outline-danger btn-sm" (click)="supprimerClient(c.id)" title="Supprimer">
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="alert alert-secondary mt-4 text-center" *ngIf="clientsFiltres.length === 0">
    <i class="bi bi-info-circle me-2"></i>
    <span *ngIf="searchTerm">Aucun client ne correspond à votre recherche.</span>
    <span *ngIf="!searchTerm">Aucun client n'est enregistré pour le moment.</span>
  </div>
</div>
