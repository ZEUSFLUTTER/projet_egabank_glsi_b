<div class="mb-4">
  <h2 class="fw-bold text-dark mb-1">Comptes Bancaires</h2>
  <p class="text-muted small">Gestion et suivi de tous les comptes ouverts chez EGA Bank.</p>
</div>

<div class="card border-0 shadow-sm rounded-4 overflow-hidden">
  <div class="card-header bg-white border-0 p-4 d-flex justify-content-between align-items-center">
    <h5 class="fw-bold m-0">Tous les comptes</h5>
    <div class="search-box bg-light px-3 py-2 rounded-3 border d-flex align-items-center">
      <i class="bi bi-search text-muted me-2"></i>
      <input type="text" [(ngModel)]="keyword" (keyup)="searchAccounts()" class="border-0 bg-transparent small outline-none" placeholder="Rechercher IBAN ou Client...">
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead class="bg-light-subtle">
        <tr class="text-secondary extra-small fw-bold text-uppercase">
          <th class="ps-4 py-3">Client</th>
          <th>IBAN</th>
          <th>Type</th>
          <th>Solde</th>
          <th>Statut</th>
          <th class="text-end pe-4">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let a of filteredAccounts">
          <td class="ps-4">
            <div class="fw-bold text-dark">{{a.client.prenom}} {{a.client.nom}}</div>
          </td>
          <td class="small font-monospace">{{a.numCompte}}</td>
          <td>
            <span class="badge bg-light text-dark border px-2 py-1">
              {{ a.decouvert !== undefined ? 'Courant' : 'Épargne' }}
            </span>
          </td>
          <td><span class="fw-bold text-primary">{{a.solde | number:'1.2-2'}} {{a.devis}}</span></td>
          
          <!--  -->
          <td>
            <span class="badge rounded-pill border px-3" 
                  [ngClass]="{
                    'bg-success-subtle text-success border-success-subtle': a.status === 'ACTIVATED',
                    'bg-warning-subtle text-warning border-warning-subtle': a.status === 'SUSPENDED',
                    'bg-dark text-white border-dark': a.status === 'CLOSED'
                  }">
              {{ a.status === 'ACTIVATED' ? 'actif' : a.status === 'SUSPENDED' ? 'suspendu' : 'clôturé' }}
            </span>
          </td>

          <td class="text-end pe-4">
            <a [routerLink]="['/admin/account-details', a.numCompte]" class="btn btn-link text-primary text-decoration-none small fw-bold">
              <i class="bi bi-eye me-1"></i> Voir Détails
            </a>
          </td>
        </tr>
      </tbody>
    </table>
    <!-- Message si recherche vide -->
    <div *ngIf="filteredAccounts.length === 0" class="text-center p-5 text-muted">
        Aucun compte ne correspond à votre recherche.
    </div>
  </div>
</div>