<app-navbar></app-navbar>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-users me-2"></i>Liste des Clients ({{ clients.length }})</h2>
    <a routerLink="/clients/new" class="btn btn-primary">
      <i class="fas fa-plus me-2"></i>Nouveau Client
    </a>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show">
    <i class="fas fa-exclamation-triangle me-2"></i>
    {{ errorMessage }}
    <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
    <p class="mt-2">Chargement des clients...</p>
  </div>

  <div *ngIf="!isLoading && clients.length === 0" class="alert alert-info text-center">
    <i class="fas fa-info-circle me-2"></i>
    Aucun client trouvé.
    <a routerLink="/clients/new" class="alert-link">Créer le premier client</a>
  </div>

  <div *ngIf="!isLoading && clients.length > 0">
    <div class="card shadow-sm">
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover table-striped mb-0">
            <thead class="table-primary">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Nom Complet</th>
              <th scope="col">Email</th>
              <th scope="col">Téléphone</th>
              <th scope="col">Date Naissance</th>
              <th scope="col">Nationalité</th>
              <th scope="col" class="text-center">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let client of clients; let i = index">
              <td>{{ client.id }}</td>
              <td class="fw-bold">
                <i class="fas fa-user-circle me-2 text-primary"></i>
                {{ client.prenom }} {{ client.nom }}
              </td>
              <td>
                <a [href]="'mailto:' + client.courriel" class="text-decoration-none">
                  {{ client.courriel }}
                </a>
              </td>
              <td>
                <i class="fas fa-phone me-1"></i>
                {{ client.numeroTelephone }}
              </td>
              <td>{{ client.dateNaissance | date:'dd/MM/yyyy' }}</td>
              <td>
                <span class="badge bg-info">{{ client.nationalite }}</span>
              </td>
              <td class="text-center">
                <div class="btn-group" role="group">
                  <button
                    class="btn btn-sm btn-outline-warning"
                    (click)="editClient(client.id!)"
                    title="Modifier">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button
                    class="btn btn-sm btn-outline-danger"
                    (click)="deleteClient(client.id!)"
                    title="Supprimer">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="mt-3 text-muted">
      <small>
        <i class="fas fa-info-circle me-1"></i>
        Total : {{ clients.length }} client(s) enregistré(s)
      </small>
    </div>
  </div>
</div>
